!function(t){"use strict";t.expr[":"].icontains=function(e,i,s){return t(e).text().toUpperCase().indexOf(s[3].toUpperCase())>=0};var e=function(i,s,n){n&&(n.stopPropagation(),n.preventDefault()),this.$element=t(i),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=t.extend({},t.fn.selectpicker.defaults,this.$element.data(),"object"==typeof s&&s),null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=e.prototype.val,this.render=e.prototype.render,this.refresh=e.prototype.refresh,this.setStyle=e.prototype.setStyle,this.selectAll=e.prototype.selectAll,this.deselectAll=e.prototype.deselectAll,this.init()};e.prototype={constructor:e,init:function(){var e=this,i=this.$element.attr("id");this.$element.hide(),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$menu=this.$newElement.find("> .dropdown-menu"),this.$button=this.$newElement.find("> button"),this.$searchbox=this.$newElement.find("input"),void 0!==i&&(this.$button.attr("data-id",i),t('label[for="'+i+'"]').click(function(t){t.preventDefault(),e.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.liHeight(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this)},createDropdown:function(){var e=this.multiple?" show-tick":"",i=this.$element.parent().hasClass("input-group")?" input-group-btn":"",s=this.autofocus?" autofocus":"",n=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",o=this.options.liveSearch?'<div class="bootstrap-select-searchbox"><input type="text" class="input-block-level form-control" /></div>':"",a=this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-block"><button class="actions-btn bs-select-all btn btn-sm btn-default">Select All</button><button class="actions-btn bs-deselect-all btn btn-sm btn-default">Deselect All</button></div></div>':"",r='<div class="btn-group bootstrap-select'+e+i+'">'+'<button type="button" class="btn dropdown-toggle selectpicker" data-toggle="dropdown"'+s+">"+'<span class="filter-option pull-left"></span>&nbsp;'+'<span class="caret"></span>'+"</button>"+'<div class="dropdown-menu open">'+n+o+a+'<ul class="dropdown-menu inner selectpicker" role="menu">'+"</ul>"+"</div>"+"</div>";return t(r)},createView:function(){var t=this.createDropdown(),e=this.createLi();return t.find("ul").append(e),t},reloadLi:function(){this.destroyLi();var t=this.createLi();this.$menu.find("ul").append(t)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var e=this,i=[],s="";return this.$element.find("option").each(function(){var s=t(this),n=s.attr("class")||"",o=s.attr("style")||"",a=s.data("content")?s.data("content"):s.html(),r=void 0!==s.data("subtext")?'<small class="muted text-muted">'+s.data("subtext")+"</small>":"",l=void 0!==s.data("icon")?'<i class="'+e.options.iconBase+" "+s.data("icon")+'"></i> ':"";if(""!==l&&(s.is(":disabled")||s.parent().is(":disabled"))&&(l="<span>"+l+"</span>"),s.data("content")||(a=l+'<span class="text">'+a+r+"</span>"),e.options.hideDisabled&&(s.is(":disabled")||s.parent().is(":disabled")))i.push('<a style="min-height: 0; padding: 0"></a>');else if(s.parent().is("optgroup")&&s.data("divider")!==!0)if(0===s.index()){var h=s.parent().attr("label"),c=void 0!==s.parent().data("subtext")?'<small class="muted text-muted">'+s.parent().data("subtext")+"</small>":"",u=s.parent().data("icon")?'<i class="'+s.parent().data("icon")+'"></i> ':"";h=u+'<span class="text">'+h+c+"</span>",0!==s[0].index?i.push('<div class="div-contain"><div class="divider"></div></div><dt>'+h+"</dt>"+e.createA(a,"opt "+n,o)):i.push("<dt>"+h+"</dt>"+e.createA(a,"opt "+n,o))}else i.push(e.createA(a,"opt "+n,o));else s.data("divider")===!0?i.push('<div class="div-contain"><div class="divider"></div></div>'):t(this).data("hidden")===!0?i.push("<a></a>"):i.push(e.createA(a,n,o))}),t.each(i,function(t,e){var i="<a></a>"===e?'class="hide is-hidden"':"";s+='<li rel="'+t+'"'+i+">"+e+"</li>"}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),t(s)},createA:function(t,e,i){return'<a tabindex="0" class="'+e+'" style="'+i+'">'+t+'<i class="'+this.options.iconBase+" "+this.options.tickIcon+' icon-ok check-mark"></i>'+"</a>"},render:function(e){var i=this;e!==!1&&this.$element.find("option").each(function(e){i.setDisabled(e,t(this).is(":disabled")||t(this).parent().is(":disabled")),i.setSelected(e,t(this).is(":selected"))}),this.tabIndex();var s=this.$element.find("option:selected").map(function(){var e,s=t(this),n=s.data("icon")&&i.options.showIcon?'<i class="'+i.options.iconBase+" "+s.data("icon")+'"></i> ':"";return e=i.options.showSubtext&&s.attr("data-subtext")&&!i.multiple?' <small class="muted text-muted">'+s.data("subtext")+"</small>":"",s.data("content")&&i.options.showContent?s.data("content"):void 0!==s.attr("title")?s.attr("title"):n+s.html()+e}).toArray(),n=this.multiple?s.join(this.options.multipleSeparator):s[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var o=this.options.selectedTextFormat.split(">"),a=this.options.hideDisabled?":not([disabled])":"";(o.length>1&&s.length>o[1]||1==o.length&&s.length>=2)&&(n=this.options.countSelectedText.replace("{0}",s.length).replace("{1}",this.$element.find('option:not([data-divider="true"]):not([data-hidden="true"])'+a).length))}this.options.title=this.$element.attr("title"),n||(n=void 0!==this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",t.trim(n)),this.$newElement.find(".filter-option").html(n)},setStyle:function(t,e){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device/gi,""));var i=t?t:this.options.style;"add"==e?this.$button.addClass(i):"remove"==e?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(){if(this.options.size!==!1){var t=this.$menu.parent().clone().find("> .dropdown-toggle").prop("autofocus",!1).end().appendTo("body"),e=t.addClass("open").find("> .dropdown-menu"),i=e.find("li > a").outerHeight(),s=this.options.header?e.find(".popover-title").outerHeight():0,n=this.options.liveSearch?e.find(".bootstrap-select-searchbox").outerHeight():0,o=this.options.actionsBox?e.find(".bs-actionsbox").outerHeight():0;t.remove(),this.$newElement.data("liHeight",i).data("headerHeight",s).data("searchHeight",n).data("actionsHeight",o)}},setSize:function(){var e,i,s,n=this,o=this.$menu,a=o.find(".inner"),r=this.$newElement.outerHeight(),l=this.$newElement.data("liHeight"),h=this.$newElement.data("headerHeight"),c=this.$newElement.data("searchHeight"),u=this.$newElement.data("actionsHeight"),d=o.find("li .divider").outerHeight(!0),p=parseInt(o.css("padding-top"))+parseInt(o.css("padding-bottom"))+parseInt(o.css("border-top-width"))+parseInt(o.css("border-bottom-width")),f=this.options.hideDisabled?":not(.disabled)":"",g=t(window),m=p+parseInt(o.css("margin-top"))+parseInt(o.css("margin-bottom"))+2,v=function(){i=n.$newElement.offset().top-g.scrollTop(),s=g.height()-i-r};if(v(),this.options.header&&o.css("padding-top",0),"auto"==this.options.size){var b=function(){var t,r=n.$lis.not(".hide");v(),e=s-m,n.options.dropupAuto&&n.$newElement.toggleClass("dropup",i>s&&e-m<o.height()),n.$newElement.hasClass("dropup")&&(e=i-m),t=r.length+r.find("dt").length>3?3*l+m-2:0,o.css({"max-height":e+"px",overflow:"hidden","min-height":t+h+c+u+"px"}),a.css({"max-height":e-h-c-u-p+"px","overflow-y":"auto","min-height":Math.max(t-p,0)+"px"})};b(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",b),t(window).off("resize.getSize").on("resize.getSize",b),t(window).off("scroll.getSize").on("scroll.getSize",b)}else if(this.options.size&&"auto"!=this.options.size&&o.find("li"+f).length>this.options.size){var y=o.find("li"+f+" > *").filter(":not(.div-contain)").slice(0,this.options.size).last().parent().index(),w=o.find("li").slice(0,y+1).find(".div-contain").length;e=l*this.options.size+w*d+p,n.options.dropupAuto&&this.$newElement.toggleClass("dropup",i>s&&e<o.height()),o.css({"max-height":e+h+c+u+"px",overflow:"hidden"}),a.css({"max-height":e-p+"px","overflow-y":"auto"})}},setWidth:function(){if("auto"==this.options.width){this.$menu.css("min-width","0");var t=this.$newElement.clone().appendTo("body"),e=t.find("> .dropdown-menu").css("width"),i=t.css("width","auto").find("> button").css("width");t.remove(),this.$newElement.css("width",Math.max(parseInt(e),parseInt(i))+"px")}else"fit"==this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var e,i,s=this,n="<div />",o=t(n),a=function(t){o.addClass(t.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",t.hasClass("dropup")),e=t.offset(),i=t.hasClass("dropup")?0:t[0].offsetHeight,o.css({top:e.top+i,left:e.left,width:t[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){s.isDisabled()||(a(t(this)),o.appendTo(s.options.container),o.toggleClass("open",!t(this).hasClass("open")),o.append(s.$menu))}),t(window).resize(function(){a(s.$newElement)}),t(window).on("scroll",function(){a(s.$newElement)}),t("html").on("click",function(e){t(e.target).closest(s.$newElement).length<1&&o.removeClass("open")})},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null,this.reloadLi(),this.render(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},update:function(){this.reloadLi(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},setSelected:function(e,i){null==this.$lis&&(this.$lis=this.$menu.find("li")),t(this.$lis[e]).toggleClass("selected",i)},setDisabled:function(e,i){null==this.$lis&&(this.$lis=this.$menu.find("li")),i?t(this.$lis[e]).addClass("disabled").find("a").attr("href","#").attr("tabindex",-1):t(this.$lis[e]).removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var t=this;this.isDisabled()?this.$button.addClass("disabled").attr("tabindex",-1):(this.$button.hasClass("disabled")&&this.$button.removeClass("disabled"),-1==this.$button.attr("tabindex")&&(this.$element.data("tabindex")||this.$button.removeAttr("tabindex"))),this.$button.click(function(){return!t.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var e=this;t("body").on("touchstart.dropdown",".dropdown-menu",function(t){t.stopPropagation()}),this.$newElement.on("click",function(){e.setSize(),e.options.liveSearch||e.multiple||setTimeout(function(){e.$menu.find(".selected a").focus()},10)}),this.$menu.on("click","li a",function(i){var s=t(this).parent().index(),n=e.$element.val(),o=e.$element.prop("selectedIndex");if(e.multiple&&i.stopPropagation(),i.preventDefault(),!e.isDisabled()&&!t(this).parent().hasClass("disabled")){var a=e.$element.find("option"),r=a.eq(s),l=r.prop("selected"),h=r.parent("optgroup"),c=e.options.maxOptions,u=h.data("maxOptions")||!1;if(e.multiple){if(r.prop("selected",!l),e.setSelected(s,!l),c!==!1||u!==!1){var d=c<a.filter(":selected").length,p=u<h.find("option:selected").length,f=e.options.maxOptionsText,g=f[0].replace("{n}",c),m=f[1].replace("{n}",u),v=t('<div class="notify"></div>');(c&&d||u&&p)&&(f[2]&&(g=g.replace("{var}",f[2][c>1?0:1]),m=m.replace("{var}",f[2][u>1?0:1])),r.prop("selected",!1),e.$menu.append(v),c&&d&&(v.append(t("<div>"+g+"</div>")),e.$element.trigger("maxReached.bs.select")),u&&p&&(v.append(t("<div>"+m+"</div>")),e.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){e.setSelected(s,!1)},10),v.delay(750).fadeOut(300,function(){t(this).remove()}))}}else a.prop("selected",!1),r.prop("selected",!0),e.$menu.find(".selected").removeClass("selected"),e.setSelected(s,!0);e.multiple?e.options.liveSearch&&e.$searchbox.focus():e.$button.focus(),(n!=e.$element.val()&&e.multiple||o!=e.$element.prop("selectedIndex")&&!e.multiple)&&e.$element.change()}}),this.$menu.on("click","li.disabled a, li dt, li .div-contain, .popover-title, .popover-title :not(.close)",function(t){t.target==this&&(t.preventDefault(),t.stopPropagation(),e.options.liveSearch?e.$searchbox.focus():e.$button.focus())}),this.$menu.on("click",".popover-title .close",function(){e.$button.focus()}),this.$searchbox.on("click",function(t){t.stopPropagation()}),this.$menu.on("click",".actions-btn",function(i){e.options.liveSearch?e.$searchbox.focus():e.$button.focus(),i.preventDefault(),i.stopPropagation(),t(this).is(".bs-select-all")?e.selectAll():e.deselectAll(),e.$element.change()}),this.$element.change(function(){e.render(!1)})},liveSearchListener:function(){var e=this,i=t('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api",function(){e.$menu.find(".active").removeClass("active"),e.$searchbox.val()&&(e.$searchbox.val(""),e.$lis.not(".is-hidden").removeClass("hide"),i.parent().length&&i.remove()),e.multiple||e.$menu.find(".selected").addClass("active"),setTimeout(function(){e.$searchbox.focus()},10)}),this.$searchbox.on("input propertychange",function(){e.$searchbox.val()?(e.$lis.not(".is-hidden").removeClass("hide").find("a").not(":icontains("+e.$searchbox.val()+")").parent().addClass("hide"),e.$menu.find("li").filter(":visible:not(.no-results)").length?i.parent().length&&i.remove():(i.parent().length&&i.remove(),i.html(e.options.noneResultsText+' "'+e.$searchbox.val()+'"').show(),e.$menu.find("li").last().after(i))):(e.$lis.not(".is-hidden").removeClass("hide"),i.parent().length&&i.remove()),e.$menu.find("li.active").removeClass("active"),e.$menu.find("li").filter(":visible:not(.divider)").eq(0).addClass("active").find("a").focus(),t(this).focus()}),this.$menu.on("mouseenter","a",function(i){e.$menu.find(".active").removeClass("active"),t(i.currentTarget).parent().not(".disabled").addClass("active")}),this.$menu.on("mouseleave","a",function(){e.$menu.find(".active").removeClass("active")})},val:function(t){return void 0!==t?(this.$element.val(t),this.$element.change(),this.$element):this.$element.val()},selectAll:function(){null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$element.find("option:enabled").prop("selected",!0),t(this.$lis).filter(":not(.disabled)").addClass("selected"),this.render(!1)},deselectAll:function(){null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$element.find("option:enabled").prop("selected",!1),t(this.$lis).filter(":not(.disabled)").removeClass("selected"),this.render(!1)},keydown:function(e){var i,s,n,o,a,r,l,h,c,u,d,p,f={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(i=t(this),n=i.parent(),i.is("input")&&(n=i.parent().parent()),u=n.data("this"),u.options.liveSearch&&(n=i.parent().parent()),u.options.container&&(n=u.$menu),s=t("[role=menu] li:not(.divider) a",n),p=u.$menu.parent().hasClass("open"),!p&&/([0-9]|[A-z])/.test(String.fromCharCode(e.keyCode))&&(u.options.container?u.$newElement.trigger("click"):(u.setSize(),u.$menu.parent().addClass("open"),p=u.$menu.parent().hasClass("open")),u.$searchbox.focus()),u.options.liveSearch&&(/(^9$|27)/.test(e.keyCode)&&p&&0===u.$menu.find(".active").length&&(e.preventDefault(),u.$menu.parent().removeClass("open"),u.$button.focus()),s=t("[role=menu] li:not(.divider):visible",n),i.val()||/(38|40)/.test(e.keyCode)||0===s.filter(".active").length&&(s=u.$newElement.find("li").filter(":icontains("+f[e.keyCode]+")"))),s.length){if(/(38|40)/.test(e.keyCode))o=s.index(s.filter(":focus")),r=s.parent(":not(.disabled):visible").first().index(),l=s.parent(":not(.disabled):visible").last().index(),a=s.eq(o).parent().nextAll(":not(.disabled):visible").eq(0).index(),h=s.eq(o).parent().prevAll(":not(.disabled):visible").eq(0).index(),c=s.eq(a).parent().prevAll(":not(.disabled):visible").eq(0).index(),u.options.liveSearch&&(s.each(function(e){t(this).is(":not(.disabled)")&&t(this).data("index",e)}),o=s.index(s.filter(".active")),r=s.filter(":not(.disabled):visible").first().data("index"),l=s.filter(":not(.disabled):visible").last().data("index"),a=s.eq(o).nextAll(":not(.disabled):visible").eq(0).data("index"),h=s.eq(o).prevAll(":not(.disabled):visible").eq(0).data("index"),c=s.eq(a).prevAll(":not(.disabled):visible").eq(0).data("index")),d=i.data("prevIndex"),38==e.keyCode&&(u.options.liveSearch&&(o-=1),o!=c&&o>h&&(o=h),r>o&&(o=r),o==d&&(o=l)),40==e.keyCode&&(u.options.liveSearch&&(o+=1),-1==o&&(o=0),o!=c&&a>o&&(o=a),o>l&&(o=l),o==d&&(o=r)),i.data("prevIndex",o),u.options.liveSearch?(e.preventDefault(),i.is(".dropdown-toggle")||(s.removeClass("active"),s.eq(o).addClass("active").find("a").focus(),i.focus())):s.eq(o).focus();else if(!i.is("input")){var g,m,v=[];s.each(function(){t(this).parent().is(":not(.disabled)")&&t.trim(t(this).text().toLowerCase()).substring(0,1)==f[e.keyCode]&&v.push(t(this).parent().index())}),g=t(document).data("keycount"),g++,t(document).data("keycount",g),m=t.trim(t(":focus").text().toLowerCase()).substring(0,1),m!=f[e.keyCode]?(g=1,t(document).data("keycount",g)):g>=v.length&&(t(document).data("keycount",0),g>v.length&&(g=1)),s.eq(v[g-1]).focus()}/(13|32|^9$)/.test(e.keyCode)&&p&&(/(32)/.test(e.keyCode)||e.preventDefault(),u.options.liveSearch?/(32)/.test(e.keyCode)||(u.$menu.find(".active a").click(),i.focus()):t(":focus").click(),t(document).data("keycount",0)),(/(^9$|27)/.test(e.keyCode)&&p&&(u.multiple||u.options.liveSearch)||/(27)/.test(e.keyCode)&&!p)&&(u.$menu.parent().removeClass("open"),u.$button.focus())}},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},destroy:function(){this.$newElement.remove(),this.$element.remove()}},t.fn.selectpicker=function(i,s){var n,o=arguments,a=this.each(function(){if(t(this).is("select")){var a=t(this),r=a.data("selectpicker"),l="object"==typeof i&&i;if(r){if(l)for(var h in l)r.options[h]=l[h]}else a.data("selectpicker",r=new e(this,l,s));if("string"==typeof i){var c=i;r[c]instanceof Function?([].shift.apply(o),n=r[c].apply(r,o)):n=r.options[c]}}});return void 0!==n?n:a},t.fn.selectpicker.defaults={style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",noneSelectedText:"Nothing selected",noneResultsText:"No results match",countSelectedText:"{0} of {1} selected",maxOptionsText:["Limit reached ({n} {var} max)","Group limit reached ({n} {var} max)",["items","item"]],width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,actionsBox:!1,multipleSeparator:", ",iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1},t(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bootstrap-select-searchbox input",e.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bootstrap-select-searchbox input",function(t){t.stopPropagation()})}(window.jQuery);